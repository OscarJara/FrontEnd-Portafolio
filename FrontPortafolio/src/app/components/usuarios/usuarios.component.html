<app-navbar></app-navbar>
<app-sidebar></app-sidebar>
<div id="wrapper">
  <div class="flot-container">
    <div class="main">
      <div class="container-fluid">
        <div class="card shadow mb-4">
          <div align="right">
            <table>
              <tr>
                <td>
                  <h1 class="h3 mb-2 text-gray-800">Usuarios</h1>
                </td>
                <td></td>
                <td>
                  <button class="btn btn-outline-primary" id='add-button'
                    (click)="AbregarUsuario(content)">
                    <!--(click)="AbrirModal(nombreModal,'Crear Usuario','','','',0)">--></button>
                </td>
              </tr>
            </table>
          </div>
          <div class="card-header py-3">
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Apellido Paterno</th>
                    <th>Apellido Materno</th>
                    <th>Foto</th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor='let user of users ; let i = index '>
                    <td>{{i+1}}</td>
                    <td>{{user.nombre}}</td>
                    <td>{{user.apellido_paterno}}</td>
                    <td>{{user.apellido_materno}}</td>
                    <td><img class="img-profile rounded-circle img-thumb" [src]="user.imagen"></td>
                    <td><button class="btn btn-outline-success" id='update-button' (click)="AbrirModal(
                                                                                                nombreModal,
                                                                                                'Modificar Usuario',
                                                                                                user.nombre,
                                                                                                user.apellido_materno,
                                                                                                user.apellido_paterno,
                                                                                                user.id)"></button>
                    </td>
                    <td><button class="btn btn-outline-danger" id="delete-button"
                        (click)='DeleteUser(user.id)'></button></td>
                  </tr>

                </tbody>
              </table>
            </div>
          </div>
        </div>
</div>
    </div>
</div>
</div>

<a class="scroll-to-top rounded" href="#page-top">
  <i class="fas fa-angle-up"></i>
</a>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      ...
    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Agregar Usuario</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form class="user" (ngSubmit)='AddUser(f)'
        #f = 'ngForm'>
        <div class="form-row">
          <div class="form-group col-md-6">
            <span *ngIf="f.submitted && f.controls['nombre'].errors" 
                        class="text-danger animated fadeIn">El nombre es obligatorio</span>
            <label for="nombre">Nombre</label>
            <input type="text" 
                    class="form-control" 
                    [(ngModel)]='user.nombre'
                    name="nombre" 
                    required
                    placeholder="Nombre">
          </div>
          <div class="form-group col-md-6">
            <span *ngIf="f.submitted && f.controls['email'].errors" 
                        class="text-danger animated fadeIn">El email es obligatorio <br></span>
            <label for="nombre">Email</label>
            <input 
                    [(ngModel)] ='user.email'
                    type="email" 
                    class="form-control" 
                    email
                    name="email" 
                    required
                    placeholder="Correo">
                            
          </div>
          
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <span *ngIf="f.submitted && f.controls['appaterno'].errors" 
                        class="text-danger animated fadeIn">El Apellido Paterno es obligatorio <br></span>
            <label for="appaterno">Apellido Paterno</label>
            <input type="text" 
                  class="form-control" 
                  [(ngModel)]='user.appaterno'
                  name="appaterno"
                  required
                  placeholder="Apellido Paterno">
          </div>
          <div class="form-group col-md-6">
            <span *ngIf="f.submitted && f.controls['apmaterno'].errors" 
                        class="text-danger animated fadeIn">El Apellido Materno es obligatorio <br></span>
            <label for="appmaterno">Apellito Materno</label>
            <input type="text" 
                    class="form-control" 
                    [(ngModel)]='user.apmaterno'
                    name="apmaterno"
                    required
                    placeholder="Apellido Materno">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
              <span *ngIf="f.submitted && selectRole.value <0" 
                        class="text-danger animated fadeIn">El Rol es obligatorio <br></span>
              <label>Rol: </label>
              <select  #selectRole (change)='setIdRole(selectRole.value)'>
                  <option value="-1">--ROLES--</option>
                  <option *ngFor="let roles of Roles" value='{{roles.id}}'>
                      {{roles.nombre}}
                  </option>
              </select>
          </div>
          <div class="form-group col-md-6">
              <span *ngIf="f.submitted && selectUnity.value <0" 
                        class="text-danger animated fadeIn">La Unidad es obligatorio <br></span>
              <label>Unidad: </label>
              <select #selectUnity (change)='setIdUnity(selectUnity.value)'>
                  <option value="-1">--UNIDADES--</option>
                  <option *ngFor="let unity of Unity" value={{unity.id}}>
                      {{unity.nombre}}
                  </option>
              </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-10">
            <label for="exampleFormControlFile1" >Imagen</label>
            <input (change)='setPhoto($event.target.files[0])' type="file" class="form-control-file" id="userPhoto">
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-success"  
              align='center'>Agregar</button>
          <button type="button"  class="btn btn-danger"
            (click)="modal.close('Ok click')">Cancelar</button>
          
        </div>
        
      </form>
  </div>
  
</ng-template>


<!--<ng-template #nombreModal let-c="close" let-d="dismiss" class="animated fadeIn">

  <div class="modal-header"> {{nombre_modal}}
    <button type="button" class="close" (click)="c('')" id="button-close"></button>
  </div>
  <div class="modal-dialog modal-lg" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg">
      <form>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="nombre">Nombre</label>
            <input type="text" class="form-control" [(ngModel)]='user.nombre' name="nombre" placeholder="Nombre">
          </div>

          <div class="form-group col-md-6">
            <label for="appmaterno">Apellito Materno</label>
            <input type="text" class="form-control" [(ngModel)]='user.apmaterno' name="appmaterno"
              placeholder="Apellido Materno">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="appaterno">Apellido Paterno</label>
            <input type="text" class="form-control" [(ngModel)]='user.appaterno' name="appaterno"
              placeholder="Apellido Paterno">
          </div>

        </div>
        <div class="form-row">
          <div class="form-group col-md-10">
            <label for="exampleFormControlFile1">Imagen</label>
            <input type="file" class="form-control-file" id="exampleFormControlFile1">
          </div>
        </div>
        <button type="submit" class="btn btn-primary" id='save-button' align='center'></button>
      </form>
    </div>
  </div>
</ng-template>-->
